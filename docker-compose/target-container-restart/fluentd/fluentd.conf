<source>
  @type tail
  path /var/logs/api.log
  pos_file /var/pos//api.log.pos
  tag api
  <parse>
    @type none
  </parse>
</source>

<filter api>
  @type parser
  key_name message
  reserve_data true
  <parse>
    @type "multiline"
    format_firstline /^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2},\d{3} - [^ ]* - [^ ]* - [^ ]*/
    format1 /^(?<time>\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2},\d{3}) - (?<logger>[^ ]*) - (?<level>[^ ]*) - (?<message>.*)/
    formatN /^ /
  </parse>
</filter>

<match api>
  @type stdout
</match>

<system>
  log_level debug
</system>